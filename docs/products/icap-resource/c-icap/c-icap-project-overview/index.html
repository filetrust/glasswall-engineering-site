<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.58">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-165717322-1"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-165717322-1",{})</script><title data-react-helmet="true">C-ICAP Project | Glasswall Engineering</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="C-ICAP Project | Glasswall Engineering"><meta data-react-helmet="true" name="description" content="C-ICAP Project Overview"><meta data-react-helmet="true" property="og:description" content="C-ICAP Project Overview"><meta data-react-helmet="true" property="og:url" content="https://filetrust.github.io/docs/products/icap-resource/c-icap/c-icap-project-overview"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://filetrust.github.io/docs/products/icap-resource/c-icap/c-icap-project-overview"><link rel="stylesheet" href="/styles.f6f65d30.css">
<link rel="preload" href="/styles.133e6fcd.js" as="script">
<link rel="preload" href="/runtime~main.af9081c3.js" as="script">
<link rel="preload" href="/main.7758c414.js" as="script">
<link rel="preload" href="/1.c5e56e49.js" as="script">
<link rel="preload" href="/2.d9fce778.js" as="script">
<link rel="preload" href="/3.ca94c5c8.js" as="script">
<link rel="preload" href="/1be78505.d7c03f36.js" as="script">
<link rel="preload" href="/68.2631b659.js" as="script">
<link rel="preload" href="/20ac7829.e49bd701.js" as="script">
<link rel="preload" href="/17896441.849a8353.js" as="script">
<link rel="preload" href="/136c5732.6351d964.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=window.matchMedia("(prefers-color-scheme: dark)"),n=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==n?t(n):e.matches&&t("dark")}()</script><div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/glasswall_logo_blue.png" alt="Glasswall Logo"><strong class="navbar__title">Glasswall Engineering</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/product-descriptions/product-overview">Documentation</a><a href="https://medium.com/glasswall-engineering" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/filetrust" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_1gtM"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_keGJ moon_1gwN"></span></div><div class="react-toggle-track-x"><span class="toggle_keGJ sun_3CPA"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/glasswall_logo_blue.png" alt="Glasswall Logo"><strong class="navbar__title">Glasswall Engineering</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/product-descriptions/product-overview">Documentation</a></li><li class="menu__list-item"><a href="https://medium.com/glasswall-engineering" target="_blank" rel="noopener noreferrer" class="menu__link">Blog</a></li><li class="menu__list-item"><a href="https://github.com/filetrust" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_1kjD"><main class="docMainContainer_FFX1"><div class="container padding-vert--lg docItemWrapper_1cc7"><div class="row"><div class="col docItemCol_2GOA"><div class="docItemContainer_2cwg"><article><header><h1 class="docTitle_1vWb">C-ICAP Project</h1></header><div class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="c-icap-project-overview"></a>C-ICAP Project Overview<a aria-hidden="true" tabindex="-1" class="hash-link" href="#c-icap-project-overview" title="Direct link to heading">#</a></h2><p>C-ICAP is an implementation of an ICAP Server. It is an open-sourced project written in C, available in Source Forge. The source code has been copied at version <a href="https://sourceforge.net/p/c-icap/code/1392/" target="_blank" rel="noopener noreferrer">r1392</a> and submitted into <a href="https://github.com/filetrust/c-icap" target="_blank" rel="noopener noreferrer">GitHub</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="build-and-installation"></a>Build and Installation<a aria-hidden="true" tabindex="-1" class="hash-link" href="#build-and-installation" title="Direct link to heading">#</a></h2><p>The project build mechanism uses the GNU Autotool tools: autoconf and automake.All the necessary instructions to build and install the product from the source code are detailed in the <a href="https://github.com/filetrust/c-icap/blob/master/README.md">README.md file</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="structure"></a>Structure<a aria-hidden="true" tabindex="-1" class="hash-link" href="#structure" title="Direct link to heading">#</a></h2><p>The C-ICAP project provides a plug-in interface that supports the implementation of ICAP Resources. Each ICAP Resouce is implemented as a library that the C-ICAP Server is configured to load.</p><p>The framework requires that each ICAP Resouce implements a <code>ci_service_module_t</code> object that defines a set of function pointers that handle event generated by the ICAP Server when processing ICAP Requests. These functions will be called by c-icap as follows:</p><ul><li>When a new request arrives for this service then the <code>ci_service_module::mod_init_request_data</code> is called.</li><li>When the icap client sends preview data then the <code>ci_service_module::mod_check_preview_handler</code> is called.<ul><li>If this function return CI_MOD_ALLOW204 the ICAP transaction stops here and the corresponding HTTP is forwarded unchanged.</li><li>If this function return CI_MOD_CONTINUE the ICAP client will send the rest body data, if any exists.</li></ul></li><li>When he client starts sends more data then the <code>ci_service_module::mod_service_io</code> is called multiple times until the client has send all the body data. The service can start to send data using this function to the client before all incoming data has been received.</li><li>When the client finishes sending body data the <code>ci_service_module::mod_end_of_data_handler</code> is called</li></ul><p>In addition to these event handlers the service is defined with</p><ul><li>A service name</li><li>A short description</li><li>Specification of service type (Request modification, Response modification, or both)</li><li>An array which contains the definitions of configuration parameters used by the service, loaded from disk at startup.</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="deployment"></a>Deployment<a aria-hidden="true" tabindex="-1" class="hash-link" href="#deployment" title="Direct link to heading">#</a></h2><p>The deployment location is defined in the build phase, the path is passed in as an argument when calling the <code>./configure</code> script. The standard location used in the <code>Readme.md</code> file is <code>/usr/local/c-icap</code>.</p><p>During installation, the specified deployment folder is populated with a set of sub-folders.</p><table><thead><tr><th align="left">Path</th><th align="left">Usage</th></tr></thead><tbody><tr><td align="left"><code>./bin</code></td><td align="left">All executables, including test applications</td></tr><tr><td align="left"><code>./etc</code></td><td align="left">Configuration files (.conf) for ICAP Server and ICAP Resources</td></tr><tr><td align="left"><code>./include/c_icap</code></td><td align="left">Header files for C-ICAP libraries</td></tr><tr><td align="left"><code>./lib</code></td><td align="left">Shared libraries for ICAP Server</td></tr><tr><td align="left"><code>./lib/c_icap</code></td><td align="left">Shared libraries for ICAP Resources</td></tr><tr><td align="left"><code>./share/c_icap/templates</code></td><td align="left">ICAP Resouce Templates files</td></tr><tr><td align="left"><code>./var/log</code></td><td align="left">Debug log files</td></tr></tbody></table><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="integration"></a>Integration<a aria-hidden="true" tabindex="-1" class="hash-link" href="#integration" title="Direct link to heading">#</a></h2><p>Each ICAP Resource has an associated .conf file. This is used to inform the ICAP Server about the ICAP Resource, and define its configuration.</p><p>Within the ICAP Resource&#x27;s .conf file, the <code>Service</code> configuration item is used to specify the resource&#x27;s service name, and the name of the library file in which the functionality is provided.</p><blockquote><p>The service name used in the .conf file should match that used in the <code>ci_service_module_t</code>.</p></blockquote><p>For a resource to be loaded by the ICAP Server, the resource&#x27;s .conf file must be included into the ICAP Service .conf file, <code>icap.conf</code>. Multiple ICAP Resources may be included byt the ICAP SErver configuration.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="local-testing"></a>Local Testing<a aria-hidden="true" tabindex="-1" class="hash-link" href="#local-testing" title="Direct link to heading">#</a></h2><p>The C-ICAP project provides a test client application that can be used to carry out validation of the ICAP Server configuration, and that of its ICAP Resources.</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">./c-icap-client -h</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Usage :</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">./c-icap-client [-V ] [-VV ] [-i icap_servername] [-p port] [-s service] [-f filename] [-o filename] [-method method] [-req url] [-resp url] [-d level] [-noreshdr ] [-nopreview ] [-no204 ] [-206 ] [-x xheader] [-hx xheader] [-rhx xheader] [-w preview] [-v ]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-V                      : Print version and exits</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-VV                     : Print version and build informations and exits</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-i icap_servername      : The icap server name</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-p port                 : The server port</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-s service              : The service name</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-f filename             : Send this file to the icap server. Default is to send an options request</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-o filename             : Save output to this file. Default is to send to stdout</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-method method          : Use &#x27;method&#x27; as method of the request modification</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-req url                : Send a request modification instead of response modification</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-resp url               : Send a responce modification request with request url the &#x27;url&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-d level                : debug level info to stdout</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-noreshdr               : Do not send reshdr headers</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-nopreview              : Do not send preview data</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-no204                  : Do not allow204 outside preview</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-206                    : Support allow206</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-x xheader              : Include xheader in icap request headers</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-hx xheader             : Include xheader in http request headers</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-rhx xheader            : Include xheader in http response headers</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-w preview              : Sets the maximum preview data size</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-v                      : Print response headers</span></div></div></div></div></div></div></article><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_TbNY"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#c-icap-project-overview" class="table-of-contents__link">C-ICAP Project Overview</a></li><li><a href="#build-and-installation" class="table-of-contents__link">Build and Installation</a></li><li><a href="#structure" class="table-of-contents__link">Structure</a></li><li><a href="#deployment" class="table-of-contents__link">Deployment</a></li><li><a href="#integration" class="table-of-contents__link">Integration</a></li><li><a href="#local-testing" class="table-of-contents__link">Local Testing</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/products/cloud-sdk/rebuild/rebuild-quickstart">Getting Started</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/glasswall" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Social</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/filetrust" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li><li class="footer__item"><a href="https://twitter.com/glasswallglobal" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li><li class="footer__item"><a href="https://www.linkedin.com/company/glasswall-solutions-limited/" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn</a></li></ul></div></div><div class="text--center"><div>Copyright © 2020 Glasswall Solutions Ltd. Built with Docusaurus.</div></div></div></footer></div>
<script src="/styles.133e6fcd.js"></script>
<script src="/runtime~main.af9081c3.js"></script>
<script src="/main.7758c414.js"></script>
<script src="/1.c5e56e49.js"></script>
<script src="/2.d9fce778.js"></script>
<script src="/3.ca94c5c8.js"></script>
<script src="/1be78505.d7c03f36.js"></script>
<script src="/68.2631b659.js"></script>
<script src="/20ac7829.e49bd701.js"></script>
<script src="/17896441.849a8353.js"></script>
<script src="/136c5732.6351d964.js"></script>
</body>
</html>