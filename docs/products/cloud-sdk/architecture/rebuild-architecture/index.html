<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.58">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-165717322-1"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-165717322-1",{})</script><title data-react-helmet="true">Architecture of Rebuild | Glasswall Engineering</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Architecture of Rebuild | Glasswall Engineering"><meta data-react-helmet="true" name="description" content="File in Http Request multipart/form-data"><meta data-react-helmet="true" property="og:description" content="File in Http Request multipart/form-data"><meta data-react-helmet="true" property="og:url" content="https://filetrust.github.io/docs/products/cloud-sdk/architecture/rebuild-architecture"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://filetrust.github.io/docs/products/cloud-sdk/architecture/rebuild-architecture"><link rel="stylesheet" href="/styles.f6f65d30.css">
<link rel="preload" href="/styles.8504771d.js" as="script">
<link rel="preload" href="/runtime~main.7c00fcc8.js" as="script">
<link rel="preload" href="/main.4df8be57.js" as="script">
<link rel="preload" href="/1.db50d5fb.js" as="script">
<link rel="preload" href="/2.d31e2e3f.js" as="script">
<link rel="preload" href="/3.5315285f.js" as="script">
<link rel="preload" href="/1be78505.792e4f8c.js" as="script">
<link rel="preload" href="/69.ea85bd18.js" as="script">
<link rel="preload" href="/20ac7829.484dac1c.js" as="script">
<link rel="preload" href="/17896441.ce689a39.js" as="script">
<link rel="preload" href="/1c654348.c899a72e.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=window.matchMedia("(prefers-color-scheme: dark)"),n=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==n?t(n):e.matches&&t("dark")}()</script><div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/glasswall_logo_blue.png" alt="Glasswall Logo"><strong class="navbar__title">Glasswall Engineering</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/product-descriptions/product-overview">Documentation</a><a href="https://medium.com/glasswall-engineering" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Blog</a><a class="navbar__item navbar__link" href="/docs/careers/rules-of-engagement">Careers</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/filetrust" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_1gtM"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_keGJ moon_1gwN"></span></div><div class="react-toggle-track-x"><span class="toggle_keGJ sun_3CPA"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/glasswall_logo_blue.png" alt="Glasswall Logo"><strong class="navbar__title">Glasswall Engineering</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/product-descriptions/product-overview">Documentation</a></li><li class="menu__list-item"><a href="https://medium.com/glasswall-engineering" target="_blank" rel="noopener noreferrer" class="menu__link">Blog</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/careers/rules-of-engagement">Careers</a></li><li class="menu__list-item"><a href="https://github.com/filetrust" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_1kjD"><div class="docSidebarContainer_1cYp" role="complementary"><div class="sidebar_1kLs"><div class="menu menu--responsive menu_w2sC"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_2vk4" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Products</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">Rebuild API</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/product-descriptions/product-overview">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guides/file-rebuild-how-it-works">Under the Hood</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/products/cloud-sdk/authentication/authentication-base">Authentication</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/products/cloud-sdk/secure-url/using-secure-urls">Secured URLs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/products/cloud-sdk/cloud-sdk-supported-types">Supported File Types</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">Rebuild</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">AWS</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/products/cloud-sdk/rebuild/rebuild-quickstart">Quickstart</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/products/cloud-sdk/architecture/rebuild-architecture">Architecture</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/products/cloud-sdk/rebuild/rebuild-api">API</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/products/cloud-sdk/rebuild/rebuild-content-management">Content Management</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/products/cloud-sdk/rebuild/rebuild-errors">Errors</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/products/cloud-sdk/security/cloud-sdk-security">Security</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Code Samples</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/products/cloud-sdk/rebuild/code-samples/python-example">Python</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/products/cloud-sdk/rebuild/code-samples/nodejs-example">NodeJs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/products/cloud-sdk/rebuild/code-samples/csharp-example">C#</a></li></ul></li></ul></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/products/cloud-sdk/sample-files">Sample Files</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/products/cloud-sdk/cloud-sdk-faq">FAQ</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Security</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/GW_Security/Security_Main">Security at Glasswall</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">How-To&#x27;s</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">CI/CD</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guides/ci-cd-pipeline">CI/CD Setup</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">ICAP</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guides/aws-fargate-container-deployment">AWS Fargate Deployment</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Careers</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/careers/rules-of-engagement">Rules of Engagement</a></li></ul></li></ul></div></div></div><main class="docMainContainer_FFX1"><div class="container padding-vert--lg docItemWrapper_1cc7"><div class="row"><div class="col docItemCol_2GOA"><div class="docItemContainer_2cwg"><article><header><h1 class="docTitle_1vWb">Architecture of Rebuild</h1></header><div class="markdown"><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="file-in-http-request-multipartform-data"></a>File in Http Request multipart/form-data<a aria-hidden="true" tabindex="-1" class="hash-link" href="#file-in-http-request-multipartform-data" title="Direct link to heading">#</a></h3><p>This pathway allows for files up to 6mb to be posted to the API within the request body. As you can see, the moving parts are minimal - the file is rebuilt by a single lambda function that calls the Rebuild SDK natively.</p><p><img src="/img/Rebuild-File-Architecture.png" alt="Figure1"></p><p>This sequence diagram shows what is occuring within the Rebuild lambda function, we first make sure it is a supported type. Then, we run an analysis of the file - anlysis reports allow us to see information on the structure of the file and of interest to us here are issues. If there are no issues then a Rebuild of the file is possible, the rebuild file is returned in memory and passed back to the requestor in a binary response body.</p><p><img src="/img/Rebuild-File-Sequence.png" alt="Figure2"></p><p>This is a great way to quickly get file-in, file-out but because we can&#x27;t have a payload to the lambda function larger than <strong>6mb</strong> we need a second pathway.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="file-in-via-authenticated-urls"></a>File in via authenticated URLs<a aria-hidden="true" tabindex="-1" class="hash-link" href="#file-in-via-authenticated-urls" title="Direct link to heading">#</a></h3><p>This second pathway allows a much larger size of file to be processed, by taking two urls:</p><ul><li>one for input which needs to point to a file and have permission to make a GET request.</li><li>one for output which needs to be able to accept a POST request to store the file.</li></ul><p><img src="/img/Rebuild-S3-Architecture.png" alt="Figure3"></p><p>An example use case would be having the file in an S3 bucket and utilising the Pre-Signed URL&#x27;s to provide just enough permissions to get the file, and a Pre-Signed URL with enough permissions to put the file into a bucket in S3.</p><p><img src="/img/Rebuild-URL-Sequence.png" alt="Figure4"></p><p>This pathway has advantages in that the caller retains control of the security of the file, the API simply has the file in memory to do the processing and writes it back to the callers domain. Future use cases will start to require us to start writing file to our storage but for these calls - its cleaner this way.</p></div></article><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/products/cloud-sdk/rebuild/rebuild-quickstart"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Quickstart - Rebuild</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/products/cloud-sdk/rebuild/rebuild-api"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Rebuild API »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_TbNY"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#file-in-http-request-multipartform-data" class="table-of-contents__link">File in Http Request multipart/form-data</a></li><li><a href="#file-in-via-authenticated-urls" class="table-of-contents__link">File in via authenticated URLs</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/products/cloud-sdk/rebuild/rebuild-quickstart">Getting Started</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/glasswall" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Social</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/filetrust" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li><li class="footer__item"><a href="https://twitter.com/glasswallglobal" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li><li class="footer__item"><a href="https://www.linkedin.com/company/glasswall-solutions-limited/" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn</a></li></ul></div></div><div class="text--center"><div>Copyright © 2020 Glasswall Solutions Ltd. Built with Docusaurus.</div></div></div></footer></div>
<script src="/styles.8504771d.js"></script>
<script src="/runtime~main.7c00fcc8.js"></script>
<script src="/main.4df8be57.js"></script>
<script src="/1.db50d5fb.js"></script>
<script src="/2.d31e2e3f.js"></script>
<script src="/3.5315285f.js"></script>
<script src="/1be78505.792e4f8c.js"></script>
<script src="/69.ea85bd18.js"></script>
<script src="/20ac7829.484dac1c.js"></script>
<script src="/17896441.ce689a39.js"></script>
<script src="/1c654348.c899a72e.js"></script>
</body>
</html>